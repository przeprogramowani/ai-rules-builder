name: Deploy MCP Server (Production)

on:
  push:
    branches:
      - master # Trigger only on pushes to the master branch

jobs:
  deploy:
    name: Deploy MCP Server
    permissions:
      contents: read  # Explicitly set read permissions
    uses: ./.github/workflows/deploy-mcp-server.yml
    # Pass secrets explicitly to the called workflow's 'secrets' input
    # secrets:
    #   CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
    #   CLOUDFLARE_ACCOUNT_ID: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
    secrets: inherit # Inherit secrets from the caller