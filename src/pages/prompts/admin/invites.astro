---
import Layout from '../../../layouts/Layout.astro';
import Topbar from '../../../components/Topbar';
import Footer from '../../../components/Footer';
import InvitesAdminPanel from '../../../components/prompt-library/admin/InvitesAdminPanel';
import { isFeatureEnabled } from '../../../features/featureFlags';

export const prerender = false;

const user = Astro.locals.user;
// Middleware already ensures admin access

// Check if org invites feature is enabled
if (!isFeatureEnabled('orgInvites')) {
  return Astro.redirect('/prompts');
}
---

<Layout title="Invite Management - Admin">
  <div class="flex flex-col h-screen max-h-screen bg-gray-950 overflow-hidden">
    <Topbar client:load initialUser={user} />
    <main class="flex-grow overflow-auto">
      <InvitesAdminPanel client:load />
    </main>
    <Footer client:load />
  </div>
</Layout>
